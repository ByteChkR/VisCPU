; ________________ Includes ________________
:include "D:\Users\Tim\Documents\VisCPU\VisOS\sys\driver\test\test_device.vasm"
; ________________ CONST VALUES ________________
; ________________ VARIABLE FIELDS ________________
:data __test_arrayC_add_v "Assignment_ArrayC_V_Simple_Test" linker:hide
:data __test_assignment_fail "Assignment b[5]=a Failed." linker:hide
:data __bArray 10 linker:hide
:data tmp_2014 1 linker:hide
:data __Assign_ArrayC_V_Simple_Test_b 1 linker:hide
:data tmp_2015 1 linker:hide
:data __Assign_ArrayC_V_Simple_Test_a 1 linker:hide
:data tmp_2016 1 linker:hide
:data tmp_2017 1 linker:hide
:data tmp_2018 1 linker:hide
:data tmp_2022 1 linker:hide
:data tmp_2023 1 linker:hide
:data tmp_2024 1 linker:hide
:data tmp_2026 1 linker:hide
; ________________ MAIN PROGRAM CODE ________________
LOAD tmp_2014 __bArray
PUSH tmp_2014; Push Param ptr_of(bArray)
JSR Assign_ArrayC_V_Simple_Test
HLT
; ________________ FUNCTION CODE ________________
.Assign_ArrayC_V_Simple_Test linker:hide
POP __Assign_ArrayC_V_Simple_Test_b
:include "D:\Users\Tim\Documents\VisCPU\VisOS\sys\driver\test\test_device.vasm"
LOAD tmp_2015 __test_arrayC_add_v
PUSH tmp_2015; Push Param ptr_of(test_arrayC_add_v)
LOAD tmp_2015 31
PUSH tmp_2015; Push Param size_of(test_arrayC_add_v)
JSR BeginTest
LOAD tmp_2015 1
COPY tmp_2015 __Assign_ArrayC_V_Simple_Test_a ; Left: def a ; Right: 1
LOAD tmp_2016 5
COPY __Assign_ArrayC_V_Simple_Test_b tmp_2015
ADD tmp_2015 tmp_2016 ; Apply offset
COPY __Assign_ArrayC_V_Simple_Test_a tmp_2017
LOAD tmp_2018 tmp_2017 ; Load Pointer for assignment
CREF tmp_2018 tmp_2015 ; Left: VisCPU.HL.Parser.Tokens.Expressions.Operators.Special.HLArrayAccessorOp ; Right: a
; Start IF
LOAD tmp_2022 5
COPY __Assign_ArrayC_V_Simple_Test_b tmp_2017
ADD tmp_2017 tmp_2022 ; Apply offset
LOAD tmp_2023 1
DREF tmp_2017 tmp_2024 ; Dereference Array Pointer (Equality Comparison)
LOAD tmp_2018 0
BNE tmp_2024 tmp_2023 bexpr_eq_2025
LOAD tmp_2018 1
.bexpr_eq_2025 linker:hide
BEZ tmp_2018 if_end_2019
JSR PassTest
RET
JMP if_end_2019
.if_end_2019 linker:hide
LOAD tmp_2017 __test_assignment_fail
PUSH tmp_2017; Push Param ptr_of(test_assignment_fail)
LOAD tmp_2023 25
PUSH tmp_2023; Push Param size_of(test_assignment_fail)
JSR FailTest
RET

.PtrRunAssign_ArrayC_V_Simple_Test
:include "D:\Users\Tim\Documents\VisCPU\VisOS\sys\driver\test\test_device.vasm"
LOAD tmp_2026 __bArray
PUSH tmp_2026; Push Param ptr_of(bArray)
JSR Assign_ArrayC_V_Simple_Test
RET

