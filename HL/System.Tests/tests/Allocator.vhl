#include "../System/System.vhl" //Include System Library

public static void TestAllocator()
{
	RawAllocator alloc = RawAllocator(100000, 100000);
	alloc.SetOptimizationLevel(2); //Full Optimizations(mitigates memory fragmentation)
	alloc.WriteDebugData();

	uint t = alloc.Allocate(256);

	for(uint i = 0; i < 256; i++)
	{
		uint p = alloc.Allocate(128);
		t[i] = p;
	}

	for(uint i = 255; i < 256; i--)
	{
		uint p = t[i];
		alloc.Free(p);
	}

	alloc.Free(t);

	alloc.WriteDebugData();
}