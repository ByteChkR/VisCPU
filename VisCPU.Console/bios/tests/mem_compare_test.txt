:include "../utils/memory/mem_compare.txt"

:data BLOCK_SRC 0xFF 0x00
:data BLOCK_DST 0xFF 0xFFFFFFFF
:const BLOCK_LEN 0xFF

.test_start

	LOAD REG_A BLOCK_SRC
	LOAD REG_B BLOCK_LEN
	LOAD REG_X BLOCK_DST
	JSR mem_compare ; Compare BLOCK_SRC to BLOCK_DST
	
	LOAD REG_A 0x00
	BNE REG_Y REG_A test_failed

	LOAD REG_A BLOCK_SRC
	LOAD REG_B BLOCK_LEN
	LOAD REG_X BLOCK_SRC
	JSR mem_compare ; Compare BLOCK_SRC to BLOCK_SRC

	LOAD REG_A 0x00
	BEQ REG_Y 0x00 test_failed

	HLT

.test_failed
	BRK
	HLT