:include "../register_layout.txt"

; Implements mem_set(REG_A = ptr, REG_B = length, REG_X = init value)

HLT ; Do not Execute this file

.mem_set
COPY REG_A REG_Y
ADD REG_Y REG_B ; END POSITION


.mem_set_loop linker:hide

LOAD REG_Z REG_X ; Make PTR from Init Value

CREF REG_Z REG_A ; Write Init Value

INC REG_A ; Move Ptr

BLT REG_A REG_Y mem_set_loop ; Exit Condition

SUB REG_A REG_B ; Restore Ptr

RET